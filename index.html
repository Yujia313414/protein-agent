<!DOCTYPE html>
<html>
<head>
    <title>è›‹ç™½è›‹åšå£« - ä½ çš„è›‹ç™½è´¨åºåˆ—åˆ†æå°åŠ©æ‰‹</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { border: 2px solid #4CAF50; padding: 20px; border-radius: 10px; }
        h1 { color: #4CAF50; }
        textarea { width: 100%; height: 100px; }
        button { background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; }
        #result { margin-top: 20px; padding: 15px; background-color: #f9f9f9; border-left: 4px solid #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¬ è›‹ç™½è›‹åšå£«</h1>
        <p><strong>è§’è‰²ï¼š</strong>è›‹ç™½è´¨åˆ†æä¸“å®¶</p >
        <p><strong>æ€ç»´æ¨¡å¼ï¼š</strong>ç”±ç®€å…¥ç¹ï¼Œå…ˆåˆ†æåŸºç¡€å±æ€§ï¼Œå†æŸ¥è¯¢ä¸“ä¸šæ•°æ®åº“ã€‚</p >
        <p>è¯·åœ¨ä¸‹é¢è¾“å…¥è›‹ç™½è´¨åºåˆ—ï¼ˆåªåŒ…å«å­—æ¯ï¼Œå¦‚ï¼šMALWMRLL...ï¼‰ï¼š</p >
        <textarea id="proteinSequence" placeholder="ä¾‹å¦‚ï¼šMALWMRLLPLLALLALWGPDPAAAF..."></textarea>
        <br><br>
        <button onclick="analyzeProtein()">å¼€å§‹åˆ†æï¼</button>
        <div id="result"></div>
    </div>

    <script>
        // è¿™å°±æ˜¯æˆ‘ä»¬â€œæœºå™¨äººå°ä¾¦æ¢â€çš„å¤§è„‘ç¨‹åºï¼
        function analyzeProtein() {
            // 1. è·å–ç”¨æˆ·è¾“å…¥çš„åºåˆ—
            let sequence = document.getElementById('proteinSequence').value.toUpperCase().replace(/\s/g, '');
            let resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "<p>è›‹ç™½è›‹åšå£«æ­£åœ¨æ€è€ƒ...</p >";

            // 2. æ€ç»´æ¨¡å¼ï¼šå…ˆè¿›è¡ŒåŸºç¡€åˆ†æ
            let basicInfo = analyzeBasic(sequence);

            // 3. æ€ç»´æ¨¡å¼ï¼šç„¶åå»é—®â€œå¤–æ´â€ï¼ˆAPIï¼‰ï¼Œè·å–æ›´ä¸“ä¸šçš„ä¿¡æ¯
            // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿä¸€ä¸‹ï¼Œå› ä¸ºç›´æ¥è°ƒç”¨APIå¯¹å°æœ‹å‹æ¥è¯´æœ‰ç‚¹éš¾ã€‚
            // æˆ‘ä»¬ç¨åä¼šè®²æ€ä¹ˆæŠŠå®ƒå˜æˆçœŸçš„ã€‚
            <!DOCTYPE html>
<html>
<head>
    <title>è›‹ç™½è›‹åšå£« - ä½ çš„è›‹ç™½è´¨åºåˆ—åˆ†æå°åŠ©æ‰‹</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { border: 2px solid #4CAF50; padding: 20px; border-radius: 10px; }
        h1 { color: #4CAF50; }
        textarea { width: 100%; height: 100px; }
        button { background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; }
        #result { margin-top: 20px; padding: 15px; background-color: #f9f9f9; border-left: 4px solid #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¬ è›‹ç™½è›‹åšå£«</h1>
        <p><strong>è§’è‰²ï¼š</strong>è›‹ç™½è´¨åˆ†æä¸“å®¶</p >
        <p><strong>æ€ç»´æ¨¡å¼ï¼š</strong>ç”±ç®€å…¥ç¹ï¼Œå…ˆåˆ†æåŸºç¡€å±æ€§ï¼Œå†æŸ¥è¯¢ä¸“ä¸šæ•°æ®åº“ã€‚</p >
        <p>è¯·åœ¨ä¸‹é¢è¾“å…¥è›‹ç™½è´¨åºåˆ—ï¼ˆåªåŒ…å«å­—æ¯ï¼Œå¦‚ï¼šMALWMRLL...ï¼‰ï¼š</p >
        <textarea id="proteinSequence" placeholder="ä¾‹å¦‚ï¼šMALWMRLLPLLALLALWGPDPAAAF..."></textarea>
        <br><br>
        <button onclick="analyzeProtein()">å¼€å§‹åˆ†æï¼</button>
        <div id="result"></div>
    </div>

    <script>
        // è¿™å°±æ˜¯æˆ‘ä»¬â€œæœºå™¨äººå°ä¾¦æ¢â€çš„å¤§è„‘ç¨‹åºï¼
        function analyzeProtein() {
            // 1. è·å–ç”¨æˆ·è¾“å…¥çš„åºåˆ—
            let sequence = document.getElementById('proteinSequence').value.toUpperCase().replace(/\s/g, '');
            let resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "<p>è›‹ç™½è›‹åšå£«æ­£åœ¨æ€è€ƒ...</p >";

            // 2. æ€ç»´æ¨¡å¼ï¼šå…ˆè¿›è¡ŒåŸºç¡€åˆ†æ
            let basicInfo = analyzeBasic(sequence);

            // 3. æ€ç»´æ¨¡å¼ï¼šç„¶åå»é—®â€œå¤–æ´â€ï¼ˆAPIï¼‰ï¼Œè·å–æ›´ä¸“ä¸šçš„ä¿¡æ¯
            // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿä¸€ä¸‹ï¼Œå› ä¸ºç›´æ¥è°ƒç”¨APIå¯¹å°æœ‹å‹æ¥è¯´æœ‰ç‚¹éš¾ã€‚
            // æˆ‘ä»¬ç¨åä¼šè®²æ€ä¹ˆæŠŠå®ƒå˜æˆçœŸçš„ã€‚
    // å·¥å…·2ï¼šèº«ä»½æŸ¥è¯¢å™¨ï¼ˆçœŸå®APIç‰ˆï¼‰
function fetchProfessionalInfo(seq, basicInfo, resultDiv) {
    // ä½¿ç”¨ EBI çš„ Proteins API è¿›è¡Œåºåˆ—ç›¸ä¼¼æ€§æœç´¢
    const url = `https://www.ebi.ac.uk/proteins/api/features?offset=0&size=100&sequence=${seq}`;

    // å¼€å§‹æ‰“ç”µè¯é—®API
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error('ç½‘ç»œå“åº”ä¸æ­£å¸¸');
            }
            return response.json();
        })
        .then(data => {
            // APIå›è¯äº†ï¼Œæˆ‘ä»¬æ¥å¤„ç†å®ƒç»™çš„æ•°æ®
            console.log(data); // è¿™è¡Œæ˜¯ä¸ºäº†æ–¹ä¾¿å¤§äººä»¬è°ƒè¯•çœ‹çš„
            let apiResults = '<p><strong>ä¸“ä¸šæ•°æ®åº“æŸ¥è¯¢ç»“æœï¼š</strong></p ><ul>';

            if (data && data.length > 0) {
                // å–ç¬¬ä¸€ä¸ªæœ€ç›¸ä¼¼çš„ç»“æœ
                let firstHit = data[0];
                apiResults += `<li>è›‹ç™½ç™»å½•å·ï¼š<strong>${firstHit.accession || 'æœªçŸ¥'}</strong></li>`;
                apiResults += `<li>è›‹ç™½åç§°ï¼š<strong>${firstHit.protein || 'æœªçŸ¥'}</strong></li>`;

                // å°è¯•è·å–åŠŸèƒ½æè¿°
                if (firstHit.comments && firstHit.comments.length > 0) {
                    for (let comment of firstHit.comments) {
                        if (comment.text && comment.text[0]) {
                            apiResults += `<li>åŠŸèƒ½æè¿°ï¼š<strong>${comment.text[0].value || 'æ— æè¿°'}</strong></li>`;
                            break;
                        }
                    }
                } else {
                    apiResults += `<li>åŠŸèƒ½æè¿°ï¼š<strong>æ— ç›¸å…³æè¿°ä¿¡æ¯</strong></li>`;
                }

            } else {
                apiResults += `<li>æŠ±æ­‰ï¼Œæ²¡æœ‰åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°é«˜åº¦ç›¸ä¼¼çš„è›‹ç™½ã€‚</li>`;
            }
            apiResults += '</ul>';

            // æŠŠæœ€ç»ˆç»“æœå±•ç¤ºåœ¨ç½‘é¡µä¸Š
            resultDiv.innerHTML = `
                <h3>ğŸ” è›‹ç™½è›‹åšå£«çš„åˆ†ææŠ¥å‘Šï¼š</h3>
                <p><strong>åŸºæœ¬ä¿¡æ¯ï¼š</strong></p >
                <ul>
                    <li>åºåˆ—é•¿åº¦ï¼š<strong>${basicInfo.length}</strong> ä¸ªæ°¨åŸºé…¸</li>
                    <li>ä¸™æ°¨é…¸ï¼ˆAï¼‰çš„æ•°é‡ï¼š<strong>${basicInfo.alanineCount}</strong> ä¸ª</li>
                    <li>äº®æ°¨é…¸ï¼ˆLï¼‰çš„æ•°é‡ï¼š<strong>${basicInfo.leucineCount}</strong> ä¸ª</li>
                </ul>
                ${apiResults}
                <p><em>æ•°æ®æ¥æºï¼šEBI Proteins API</em></p >
            `;
        })
        .catch(error => {
            // å¦‚æœæ‰“ç”µè¯å¤±è´¥äº†æ€ä¹ˆåŠ
            console.error('å‡ºé”™äº†:', error);
            resultDiv.innerHTML = `<p>æŠ±æ­‰ï¼Œè›‹ç™½è›‹åšå£«æŸ¥è¯¢èµ„æ–™æ—¶é‡åˆ°äº†ç½‘ç»œé—®é¢˜ã€‚è¯·ç¨åå†è¯•ï¼Œæˆ–è€…æ£€æŸ¥ä½ çš„åºåˆ—æ ¼å¼ã€‚ï¼ˆé”™è¯¯ï¼š${error.message}ï¼‰</p >`;
        });
}

        // å·¥å…·1ï¼šåŸºæœ¬ä¿¡æ¯æ‰«æä»ª
        function analyzeBasic(seq) {
            let length = seq.length;
            // ç®€å•çš„æ°¨åŸºé…¸ç»„æˆç»Ÿè®¡ï¼ˆè¿™é‡Œåªç®—ä¸¤ä¸ªä¾‹å­ï¼‰
            let alanineCount = (seq.match(/A/g) || []).length;
            let leucineCount = (seq.match(/L/g) || []).length;

            return {
                length: length,
                alanineCount: alanineCount,
                leucineCount: leucineCount
            };
        }